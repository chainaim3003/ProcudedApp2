"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_lib_vlei-service_ts";
exports.ids = ["_ssr_lib_vlei-service_ts"];
exports.modules = {

/***/ "(ssr)/./lib/vlei-service.ts":
/*!*****************************!*\
  !*** ./lib/vlei-service.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VLEIService: () => (/* binding */ VLEIService),\n/* harmony export */   createVLEIService: () => (/* binding */ createVLEIService),\n/* harmony export */   generateBran: () => (/* binding */ generateBran)\n/* harmony export */ });\n/* harmony import */ var signify_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! signify-ts */ \"(ssr)/./node_modules/signify-ts/dist/index.js\");\n// Real vLEI Service for Phase 2 - FIXED VERSION\n// This service manages actual vLEI credentials using KERIA agents\n// FIX: Added state validation, reconnection logic, and better error handling\n\nclass VLEIService {\n    constructor(config){\n        this.client = null;\n        this.isInitialized = false;\n        this.controllerPrefix = null;\n        this.reconnectAttempts = 0;\n        this.maxReconnectAttempts = 3;\n        this.config = config;\n        this.client = new signify_ts__WEBPACK_IMPORTED_MODULE_0__.SignifyClient(config.keriaUrl, config.bran, config.tier, config.bootUrl);\n    }\n    /**\n   * Validate client state and reconnect if necessary\n   * FIXED: Comprehensive state validation with explicit checks\n   */ async ensureClientConnected() {\n        console.log(\"\\uD83D\\uDD0D Validating client connection...\");\n        // Check if client exists\n        if (!this.client) {\n            console.log(\"‚ö†Ô∏è Client is null, attempting to reinitialize...\");\n            await this.initialize();\n            return;\n        }\n        // Check if client has a controller (which means it's connected)\n        if (!this.client.controller || !this.client.controller.pre) {\n            console.log(\"‚ö†Ô∏è Client controller not available, attempting to reinitialize...\");\n            await this.initialize();\n            return;\n        }\n        // CRITICAL: Explicitly check if state() method exists and returns valid data\n        try {\n            // Check if state method exists\n            if (!this.client.state || typeof this.client.state !== \"function\") {\n                console.warn(\"‚ö†Ô∏è Client.state method not available, reinitializing...\");\n                await this.initialize();\n                return;\n            }\n            // Try to call state() and verify it returns something\n            const stateResult = await this.client.state();\n            if (!stateResult) {\n                console.warn(\"‚ö†Ô∏è Client.state() returned null/undefined, reinitializing...\");\n                await this.initialize();\n                return;\n            }\n            // Verify state has the 'new' method (this is what fails in the error)\n            if (typeof stateResult.new !== \"function\") {\n                console.warn(\"‚ö†Ô∏è Client state is missing required methods, reinitializing...\");\n                await this.initialize();\n                return;\n            }\n            console.log(\"‚úÖ Client connection and state validated successfully\");\n            this.reconnectAttempts = 0;\n            return;\n        } catch (err) {\n            console.warn(\"‚ö†Ô∏è State validation failed:\", err.message);\n            // If state check failed, try to reinitialize\n            if (this.reconnectAttempts < this.maxReconnectAttempts) {\n                this.reconnectAttempts++;\n                console.log(`üîÑ Attempting reconnection (${this.reconnectAttempts}/${this.maxReconnectAttempts})...`);\n                await new Promise((resolve)=>setTimeout(resolve, 1000 * this.reconnectAttempts));\n                await this.initialize();\n            } else {\n                throw new Error(\"Max reconnection attempts reached. Please restart the service.\");\n            }\n        }\n    }\n    async initialize() {\n        if (this.isInitialized && this.client) {\n            console.log(\"‚úÖ Service already initialized\");\n            return;\n        }\n        try {\n            console.log(\"\\uD83D\\uDE80 Initializing vLEI service...\");\n            await (0,signify_ts__WEBPACK_IMPORTED_MODULE_0__.ready)();\n            // Create new client if needed\n            if (!this.client) {\n                this.client = new signify_ts__WEBPACK_IMPORTED_MODULE_0__.SignifyClient(this.config.keriaUrl, this.config.bran, this.config.tier, this.config.bootUrl);\n            }\n            // Try to connect first (agent might already exist)\n            try {\n                await this.client.connect();\n                console.log(\"‚úÖ Connected to existing KERIA agent\");\n            } catch (connectError) {\n                // If connect fails, boot a new agent (boot automatically connects)\n                console.log(\"\\uD83D\\uDCCB Agent does not exist, booting new agent...\");\n                try {\n                    await this.client.boot();\n                    console.log(\"‚úÖ Agent booted successfully (already connected)\");\n                } catch (bootError) {\n                    // 409 means agent already exists - need to connect instead\n                    if (bootError.message?.includes(\"409\") || bootError.message?.includes(\"Conflict\")) {\n                        console.log(\"‚ö†Ô∏è Agent already exists (409 Conflict), connecting instead...\");\n                        try {\n                            await this.client.connect();\n                            console.log(\"‚úÖ Connected to existing agent after boot conflict\");\n                        } catch (connectAfterBootError) {\n                            console.error(\"‚ùå Failed to connect after boot conflict:\", connectAfterBootError);\n                            throw new Error(\"Agent exists but cannot connect. Please restart KERIA services.\");\n                        }\n                    } else {\n                        console.error(\"‚ùå Failed to boot agent:\", bootError);\n                        console.error(\"‚ùå Error details:\", {\n                            message: bootError?.message,\n                            name: bootError?.name,\n                            stack: bootError?.stack?.split(\"\\n\")[0]\n                        });\n                        throw bootError;\n                    }\n                }\n            }\n            // Get the controller prefix (AID) after connection\n            try {\n                const controllerAID = this.client.controller?.pre;\n                console.log(\"\\uD83D\\uDD11 Controller AID:\", controllerAID);\n                if (controllerAID) {\n                    this.controllerPrefix = controllerAID;\n                } else {\n                    console.warn(\"‚ö†Ô∏è Warning: Controller AID is undefined or null\");\n                }\n            } catch (error) {\n                console.error(\"‚ùå Error accessing controller AID:\", error);\n            }\n            this.isInitialized = true;\n            this.reconnectAttempts = 0;\n            console.log(\"‚úÖ vLEI service initialized successfully\");\n            // CRITICAL: Wait briefly to ensure client state is fully initialized\n            console.log(\"‚è≥ Waiting for client state to stabilize...\");\n            await new Promise((resolve)=>setTimeout(resolve, 500));\n            console.log(\"‚úÖ Client state ready\");\n        } catch (error) {\n            console.error(\"‚ùå Failed to initialize vLEI service:\", error);\n            this.client = null;\n            this.isInitialized = false;\n            throw error;\n        }\n    }\n    async createOrganizationAID(orgInfo) {\n        console.log(`üè¢ Creating organizational AID for ${orgInfo.name}...`);\n        // CRITICAL: Ensure client is connected before proceeding\n        await this.ensureClientConnected();\n        if (!this.client) {\n            throw new Error(\"Client is not initialized after connection check\");\n        }\n        // Double-check client has required properties\n        if (!this.client.identifiers || typeof this.client.identifiers !== \"function\") {\n            console.error(\"‚ùå Client.identifiers is not available\");\n            throw new Error(\"Client identifiers method is not available. Client may not be properly initialized.\");\n        }\n        // CRITICAL: Verify state is available before proceeding\n        if (!this.client.state || typeof this.client.state !== \"function\") {\n            console.error(\"‚ùå Client.state is not available\");\n            throw new Error(\"Client state method is not available. Please reinitialize the service.\");\n        }\n        try {\n            // Test state access before proceeding\n            const stateTest = await this.client.state();\n            if (!stateTest || typeof stateTest.new !== \"function\") {\n                throw new Error(\"Client state is not properly initialized. State.new() method is missing.\");\n            }\n            console.log(\"‚úÖ Pre-flight state validation passed\");\n            // Check if AID already exists\n            try {\n                const existingAid = await this.client.identifiers().get(orgInfo.name);\n                if (existingAid && existingAid.prefix) {\n                    console.log(`‚ÑπÔ∏è AID already exists: ${existingAid.prefix}`);\n                    return existingAid.prefix;\n                }\n            } catch (error) {\n                // AID doesn't exist, continue to create it\n                console.log(`üìù AID does not exist yet, creating new one...`);\n            }\n            // Create new AID\n            console.log(\"\\uD83D\\uDD35 Calling identifiers().create() for:\", orgInfo.name);\n            // Verify identifiers() returns a valid object\n            const identifiersApi = this.client.identifiers();\n            if (!identifiersApi || !identifiersApi.create) {\n                console.error(\"‚ùå identifiers() returned null or has no create method\");\n                console.error(\"‚ùå Client state:\", {\n                    hasClient: !!this.client,\n                    hasController: !!this.client.controller,\n                    controllerPre: this.client.controller?.pre,\n                    hasIdentifiers: !!this.client.identifiers,\n                    identifiersType: typeof this.client.identifiers\n                });\n                throw new Error(\"identifiers() method not properly initialized. Client may need reconnection.\");\n            }\n            const aidResult = await identifiersApi.create(orgInfo.name);\n            if (!aidResult) {\n                throw new Error(\"Failed to create identifier - aidResult is null\");\n            }\n            // Get the operation name if available\n            let opName = null;\n            try {\n                if (typeof aidResult.op === \"function\") {\n                    const opResult = aidResult.op();\n                    opName = opResult?.name || null;\n                }\n            } catch (opError) {\n                console.warn(\"‚ö†Ô∏è Error calling op():\", opError);\n            }\n            if (!opName) {\n                console.log(\"\\uD83D\\uDD04 No operation name, waiting briefly then checking AID...\");\n                await new Promise((resolve)=>setTimeout(resolve, 1000));\n                try {\n                    const aid = (await this.client.identifiers().get(orgInfo.name)).prefix;\n                    console.log(`‚úÖ Organizational AID created: ${aid}`);\n                    return aid;\n                } catch (getError) {\n                    console.error(\"‚ùå Failed to verify AID creation:\", getError);\n                    throw new Error(\"AID creation status uncertain - operation not tracked\");\n                }\n            }\n            // Wait for the operation to complete\n            console.log(`‚è≥ Waiting for operation: ${opName}`);\n            await this.client.operations().wait(opName);\n            const aid = (await this.client.identifiers().get(orgInfo.name)).prefix;\n            console.log(`‚úÖ Organizational AID created: ${aid}`);\n            return aid;\n        } catch (error) {\n            console.error(\"‚ùå Failed to create organizational AID:\", error);\n            // Enhanced error message with retry suggestion\n            let errorMessage = error.message;\n            if (error.message?.includes(\"Cannot read properties of null\") || error.message?.includes(\"state\") || error.message?.includes(\"State.new()\")) {\n                errorMessage = 'Client state error during AID creation. The KERIA agent connection may be unstable. Try: 1) Restart KERIA services, 2) Refresh the page, 3) Click \"Issue Credentials\" again.';\n            }\n            throw new Error(errorMessage);\n        }\n    }\n    async createPersonAID(personInfo) {\n        await this.ensureClientConnected();\n        if (!this.client) {\n            throw new Error(\"Client not initialized\");\n        }\n        try {\n            console.log(`üë§ Creating personal AID for ${personInfo.name}...`);\n            // Check if AID already exists\n            try {\n                const existingAid = await this.client.identifiers().get(personInfo.name);\n                if (existingAid && existingAid.prefix) {\n                    console.log(`‚ÑπÔ∏è AID already exists: ${existingAid.prefix}`);\n                    return existingAid.prefix;\n                }\n            } catch (error) {\n                console.log(`üìù AID does not exist yet, creating new one...`);\n            }\n            const aidResult = await this.client.identifiers().create(personInfo.name);\n            if (!aidResult) {\n                throw new Error(\"Failed to create identifier - aidResult is null\");\n            }\n            // Get the operation name if available\n            let opName = null;\n            try {\n                if (typeof aidResult.op === \"function\") {\n                    const opResult = aidResult.op();\n                    opName = opResult?.name || null;\n                }\n            } catch (opError) {\n                console.warn(\"‚ö†Ô∏è Error calling op():\", opError);\n            }\n            if (!opName) {\n                console.log(\"\\uD83D\\uDD04 No operation name, waiting briefly then checking AID...\");\n                await new Promise((resolve)=>setTimeout(resolve, 1000));\n                try {\n                    const aid = (await this.client.identifiers().get(personInfo.name)).prefix;\n                    console.log(`‚úÖ Personal AID created: ${aid}`);\n                    return aid;\n                } catch (getError) {\n                    console.error(\"‚ùå Failed to verify AID creation:\", getError);\n                    throw new Error(\"AID creation status uncertain - operation not tracked\");\n                }\n            }\n            console.log(`‚è≥ Waiting for operation: ${opName}`);\n            await this.client.operations().wait(opName);\n            const aid = (await this.client.identifiers().get(personInfo.name)).prefix;\n            console.log(`‚úÖ Personal AID created: ${aid}`);\n            return aid;\n        } catch (error) {\n            console.error(\"‚ùå Failed to create personal AID:\", error);\n            throw error;\n        }\n    }\n    async issueOORCredential(orgAid, personAid, personInfo) {\n        await this.ensureClientConnected();\n        if (!this.client) {\n            throw new Error(\"Client not initialized\");\n        }\n        try {\n            console.log(`üìú Issuing OOR credential for ${personInfo.name}...`);\n            const oorSchema = \"EH6ekLjSr8V32WyFbGe1zXjTzFs9PkTYmupJ9H65O14g\";\n            const credentialData = {\n                LEI: personInfo.organizationLEI,\n                personLegalName: personInfo.legalName,\n                officialRole: personInfo.role\n            };\n            const credential = await this.client.credentials().issue(orgAid, personAid, oorSchema, credentialData);\n            console.log(`‚úÖ OOR credential issued: ${credential.sad.d}`);\n            return credential;\n        } catch (error) {\n            console.error(\"‚ùå Failed to issue OOR credential:\", error);\n            throw error;\n        }\n    }\n    async issueECRCredential(orgAid, personAid, personInfo, oorCredentialSAID, spendingLimit, maxContractValue) {\n        await this.ensureClientConnected();\n        if (!this.client) {\n            throw new Error(\"Client not initialized\");\n        }\n        try {\n            console.log(`üìú Issuing ECR credential for ${personInfo.name}...`);\n            const ecrSchema = \"EKA57bKBKxr_kN7iN_zZeBG8aP0Sv-JvpPLdJ1jg3b2g\";\n            const credentialData = {\n                LEI: personInfo.organizationLEI,\n                personLegalName: personInfo.legalName,\n                engagementContextRole: personInfo.role,\n                ...spendingLimit && {\n                    spendingLimit\n                },\n                ...maxContractValue && {\n                    maxContractValue\n                }\n            };\n            const edges = {\n                auth: oorCredentialSAID\n            };\n            const credential = await this.client.credentials().issue(orgAid, personAid, ecrSchema, credentialData, edges);\n            console.log(`‚úÖ ECR credential issued: ${credential.sad.d}`);\n            return credential;\n        } catch (error) {\n            console.error(\"‚ùå Failed to issue ECR credential:\", error);\n            throw error;\n        }\n    }\n    async verifyCredentialChain(ecrCredential, oorCredential, qviCredential) {\n        await this.ensureClientConnected();\n        if (!this.client) {\n            throw new Error(\"Client not initialized\");\n        }\n        try {\n            console.log(\"\\uD83D\\uDD0D Verifying credential chain...\");\n            const ecrValid = await this.client.credentials().verify(ecrCredential);\n            if (!ecrValid) {\n                throw new Error(\"ECR credential signature invalid\");\n            }\n            const linkedOORSAID = ecrCredential.sad.e?.auth;\n            if (linkedOORSAID !== oorCredential.sad.d) {\n                throw new Error(\"ECR does not link to provided OOR credential\");\n            }\n            const oorValid = await this.client.credentials().verify(oorCredential);\n            if (!oorValid) {\n                throw new Error(\"OOR credential signature invalid\");\n            }\n            if (oorCredential.sad.i !== qviCredential.sad.a.i) {\n                throw new Error(\"OOR issuer does not match QVI-verified organization\");\n            }\n            const qviValid = await this.client.credentials().verify(qviCredential);\n            if (!qviValid) {\n                throw new Error(\"QVI credential signature invalid\");\n            }\n            console.log(\"‚úÖ Full credential chain verified!\");\n            return {\n                valid: true,\n                orgLEI: qviCredential.sad.a.LEI,\n                personName: ecrCredential.sad.a.personLegalName,\n                role: ecrCredential.sad.a.engagementContextRole,\n                spendingLimit: ecrCredential.sad.a.spendingLimit,\n                maxContractValue: ecrCredential.sad.a.maxContractValue,\n                details: {\n                    orgName: qviCredential.sad.a.legalName,\n                    lei: qviCredential.sad.a.LEI,\n                    personName: ecrCredential.sad.a.personLegalName,\n                    role: ecrCredential.sad.a.engagementContextRole,\n                    spendingLimit: ecrCredential.sad.a.spendingLimit,\n                    maxContractValue: ecrCredential.sad.a.maxContractValue\n                }\n            };\n        } catch (error) {\n            console.error(\"‚ùå Credential chain verification failed:\", error);\n            return {\n                valid: false,\n                orgLEI: \"\",\n                personName: \"\",\n                role: \"\",\n                details: {\n                    error: error.message\n                }\n            };\n        }\n    }\n    async getCredentials(aid) {\n        await this.ensureClientConnected();\n        if (!this.client) {\n            throw new Error(\"Client not initialized\");\n        }\n        try {\n            const credentials = await this.client.credentials().list(aid);\n            return credentials;\n        } catch (error) {\n            console.error(\"‚ùå Failed to get credentials:\", error);\n            throw error;\n        }\n    }\n    async revokeCredential(credentialSAID) {\n        await this.ensureClientConnected();\n        if (!this.client) {\n            throw new Error(\"Client not initialized\");\n        }\n        try {\n            console.log(`üóëÔ∏è Revoking credential: ${credentialSAID}`);\n            await this.client.credentials().revoke(credentialSAID);\n            console.log(\"‚úÖ Credential revoked successfully\");\n        } catch (error) {\n            console.error(\"‚ùå Failed to revoke credential:\", error);\n            throw error;\n        }\n    }\n    getControllerAID() {\n        return this.controllerPrefix;\n    }\n    isServiceInitialized() {\n        return this.isInitialized && !!this.client;\n    }\n    async cleanup() {\n        console.log(\"\\uD83E\\uDDF9 Cleaning up vLEI service...\");\n        this.client = null;\n        this.controllerPrefix = null;\n        this.isInitialized = false;\n        this.reconnectAttempts = 0;\n    }\n}\n// Factory function to create vLEI service instances\nfunction createVLEIService(config) {\n    return new VLEIService(config);\n}\n// Utility function to generate random bran\nfunction generateBran() {\n    return (0,signify_ts__WEBPACK_IMPORTED_MODULE_0__.randomPasscode)();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM1RCxNQUFNLElBQUksQ0FBQ2xHLHFCQUFxQjtRQUVoQyxJQUFJLENBQUMsSUFBSSxDQUFDVCxNQUFNLEVBQUU7WUFDaEIsTUFBTSxJQUFJd0IsTUFBTTtRQUNsQjtRQUVBLElBQUk7WUFDRmQsUUFBUUMsR0FBRyxDQUFDLENBQUMseUJBQXlCLEVBQUVnRyxlQUFlLENBQUM7WUFDeEQsTUFBTSxJQUFJLENBQUMzRyxNQUFNLENBQUMwRSxXQUFXLEdBQUdrQyxNQUFNLENBQUNEO1lBQ3ZDakcsUUFBUUMsR0FBRyxDQUFDO1FBQ2QsRUFBRSxPQUFPb0IsT0FBTztZQUNkckIsUUFBUXFCLEtBQUssQ0FBQyxrQ0FBa0NBO1lBQ2hELE1BQU1BO1FBQ1I7SUFDRjtJQUVBOEUsbUJBQWtDO1FBQ2hDLE9BQU8sSUFBSSxDQUFDM0csZ0JBQWdCO0lBQzlCO0lBRUE0Ryx1QkFBZ0M7UUFDOUIsT0FBTyxJQUFJLENBQUM3RyxhQUFhLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQ0QsTUFBTTtJQUM1QztJQUVBLE1BQU0rRyxVQUF5QjtRQUM3QnJHLFFBQVFDLEdBQUcsQ0FBQztRQUNaLElBQUksQ0FBQ1gsTUFBTSxHQUFHO1FBQ2QsSUFBSSxDQUFDRSxnQkFBZ0IsR0FBRztRQUN4QixJQUFJLENBQUNELGFBQWEsR0FBRztRQUNyQixJQUFJLENBQUNFLGlCQUFpQixHQUFHO0lBQzNCO0FBQ0Y7QUFFQSxvREFBb0Q7QUFDN0MsU0FBUzZHLGtCQUFrQmpILE1BQWtCO0lBQ2xELE9BQU8sSUFBSUYsWUFBWUU7QUFDekI7QUFFQSwyQ0FBMkM7QUFDcEMsU0FBU2tIO0lBQ2QsT0FBT3RILDBEQUFjQTtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0ZWxsYXItcHJvY3VyZW1lbnQtZGFwcC8uL2xpYi92bGVpLXNlcnZpY2UudHM/ZmJjZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBSZWFsIHZMRUkgU2VydmljZSBmb3IgUGhhc2UgMiAtIEZJWEVEIFZFUlNJT05cbi8vIFRoaXMgc2VydmljZSBtYW5hZ2VzIGFjdHVhbCB2TEVJIGNyZWRlbnRpYWxzIHVzaW5nIEtFUklBIGFnZW50c1xuLy8gRklYOiBBZGRlZCBzdGF0ZSB2YWxpZGF0aW9uLCByZWNvbm5lY3Rpb24gbG9naWMsIGFuZCBiZXR0ZXIgZXJyb3IgaGFuZGxpbmdcblxuaW1wb3J0IHsgU2lnbmlmeUNsaWVudCwgVGllciwgcmFuZG9tUGFzc2NvZGUsIHJlYWR5IH0gZnJvbSAnc2lnbmlmeS10cydcblxuZXhwb3J0IGludGVyZmFjZSBWTEVJQ29uZmlnIHtcbiAga2VyaWFVcmw6IHN0cmluZ1xuICBicmFuOiBzdHJpbmdcbiAgdGllcjogVGllclxuICBib290VXJsPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3JnYW5pemF0aW9uSW5mbyB7XG4gIG5hbWU6IHN0cmluZ1xuICBsZWk6IHN0cmluZ1xuICBsZWdhbE5hbWU6IHN0cmluZ1xuICBqdXJpc2RpY3Rpb246IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcnNvbkluZm8ge1xuICBuYW1lOiBzdHJpbmdcbiAgbGVnYWxOYW1lOiBzdHJpbmdcbiAgcm9sZTogc3RyaW5nXG4gIG9yZ2FuaXphdGlvbkxFSTogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlZGVudGlhbERhdGEge1xuICBxdmlDcmVkZW50aWFsPzogYW55XG4gIG9vckNyZWRlbnRpYWw/OiBhbnlcbiAgZWNyQ3JlZGVudGlhbD86IGFueVxufVxuXG5leHBvcnQgY2xhc3MgVkxFSVNlcnZpY2Uge1xuICBwcml2YXRlIGNsaWVudDogU2lnbmlmeUNsaWVudCB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgY29uZmlnOiBWTEVJQ29uZmlnXG4gIHByaXZhdGUgaXNJbml0aWFsaXplZCA9IGZhbHNlXG4gIHByaXZhdGUgY29udHJvbGxlclByZWZpeDogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSByZWNvbm5lY3RBdHRlbXB0cyA9IDBcbiAgcHJpdmF0ZSBtYXhSZWNvbm5lY3RBdHRlbXB0cyA9IDNcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFZMRUlDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZ1xuICAgIHRoaXMuY2xpZW50ID0gbmV3IFNpZ25pZnlDbGllbnQoXG4gICAgICBjb25maWcua2VyaWFVcmwsXG4gICAgICBjb25maWcuYnJhbixcbiAgICAgIGNvbmZpZy50aWVyLFxuICAgICAgY29uZmlnLmJvb3RVcmxcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgY2xpZW50IHN0YXRlIGFuZCByZWNvbm5lY3QgaWYgbmVjZXNzYXJ5XG4gICAqIEZJWEVEOiBDb21wcmVoZW5zaXZlIHN0YXRlIHZhbGlkYXRpb24gd2l0aCBleHBsaWNpdCBjaGVja3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlQ2xpZW50Q29ubmVjdGVkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFZhbGlkYXRpbmcgY2xpZW50IGNvbm5lY3Rpb24uLi4nKVxuXG4gICAgLy8gQ2hlY2sgaWYgY2xpZW50IGV4aXN0c1xuICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gQ2xpZW50IGlzIG51bGwsIGF0dGVtcHRpbmcgdG8gcmVpbml0aWFsaXplLi4uJylcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBjbGllbnQgaGFzIGEgY29udHJvbGxlciAod2hpY2ggbWVhbnMgaXQncyBjb25uZWN0ZWQpXG4gICAgaWYgKCF0aGlzLmNsaWVudC5jb250cm9sbGVyIHx8ICF0aGlzLmNsaWVudC5jb250cm9sbGVyLnByZSkge1xuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBDbGllbnQgY29udHJvbGxlciBub3QgYXZhaWxhYmxlLCBhdHRlbXB0aW5nIHRvIHJlaW5pdGlhbGl6ZS4uLicpXG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gQ1JJVElDQUw6IEV4cGxpY2l0bHkgY2hlY2sgaWYgc3RhdGUoKSBtZXRob2QgZXhpc3RzIGFuZCByZXR1cm5zIHZhbGlkIGRhdGFcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgc3RhdGUgbWV0aG9kIGV4aXN0c1xuICAgICAgaWYgKCF0aGlzLmNsaWVudC5zdGF0ZSB8fCB0eXBlb2YgdGhpcy5jbGllbnQuc3RhdGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gQ2xpZW50LnN0YXRlIG1ldGhvZCBub3QgYXZhaWxhYmxlLCByZWluaXRpYWxpemluZy4uLicpXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBUcnkgdG8gY2FsbCBzdGF0ZSgpIGFuZCB2ZXJpZnkgaXQgcmV0dXJucyBzb21ldGhpbmdcbiAgICAgIGNvbnN0IHN0YXRlUmVzdWx0ID0gYXdhaXQgdGhpcy5jbGllbnQuc3RhdGUoKVxuICAgICAgaWYgKCFzdGF0ZVJlc3VsdCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBDbGllbnQuc3RhdGUoKSByZXR1cm5lZCBudWxsL3VuZGVmaW5lZCwgcmVpbml0aWFsaXppbmcuLi4nKVxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gVmVyaWZ5IHN0YXRlIGhhcyB0aGUgJ25ldycgbWV0aG9kICh0aGlzIGlzIHdoYXQgZmFpbHMgaW4gdGhlIGVycm9yKVxuICAgICAgaWYgKHR5cGVvZiBzdGF0ZVJlc3VsdC5uZXcgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gQ2xpZW50IHN0YXRlIGlzIG1pc3NpbmcgcmVxdWlyZWQgbWV0aG9kcywgcmVpbml0aWFsaXppbmcuLi4nKVxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ+KchSBDbGllbnQgY29ubmVjdGlvbiBhbmQgc3RhdGUgdmFsaWRhdGVkIHN1Y2Nlc3NmdWxseScpXG4gICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID0gMFxuICAgICAgcmV0dXJuXG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIFN0YXRlIHZhbGlkYXRpb24gZmFpbGVkOicsIGVyci5tZXNzYWdlKVxuICAgICAgXG4gICAgICAvLyBJZiBzdGF0ZSBjaGVjayBmYWlsZWQsIHRyeSB0byByZWluaXRpYWxpemVcbiAgICAgIGlmICh0aGlzLnJlY29ubmVjdEF0dGVtcHRzIDwgdGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cykge1xuICAgICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKytcbiAgICAgICAgY29uc29sZS5sb2coYPCflIQgQXR0ZW1wdGluZyByZWNvbm5lY3Rpb24gKCR7dGhpcy5yZWNvbm5lY3RBdHRlbXB0c30vJHt0aGlzLm1heFJlY29ubmVjdEF0dGVtcHRzfSkuLi5gKVxuICAgICAgICBcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDAgKiB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKSlcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWF4IHJlY29ubmVjdGlvbiBhdHRlbXB0cyByZWFjaGVkLiBQbGVhc2UgcmVzdGFydCB0aGUgc2VydmljZS4nKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCAmJiB0aGlzLmNsaWVudCkge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBTZXJ2aWNlIGFscmVhZHkgaW5pdGlhbGl6ZWQnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qAIEluaXRpYWxpemluZyB2TEVJIHNlcnZpY2UuLi4nKVxuICAgICAgYXdhaXQgcmVhZHkoKVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgbmV3IGNsaWVudCBpZiBuZWVkZWRcbiAgICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgU2lnbmlmeUNsaWVudChcbiAgICAgICAgICB0aGlzLmNvbmZpZy5rZXJpYVVybCxcbiAgICAgICAgICB0aGlzLmNvbmZpZy5icmFuLFxuICAgICAgICAgIHRoaXMuY29uZmlnLnRpZXIsXG4gICAgICAgICAgdGhpcy5jb25maWcuYm9vdFVybFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBjb25uZWN0IGZpcnN0IChhZ2VudCBtaWdodCBhbHJlYWR5IGV4aXN0KVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQuY29ubmVjdCgpXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ29ubmVjdGVkIHRvIGV4aXN0aW5nIEtFUklBIGFnZW50JylcbiAgICAgIH0gY2F0Y2ggKGNvbm5lY3RFcnJvcjogYW55KSB7XG4gICAgICAgIC8vIElmIGNvbm5lY3QgZmFpbHMsIGJvb3QgYSBuZXcgYWdlbnQgKGJvb3QgYXV0b21hdGljYWxseSBjb25uZWN0cylcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk4sgQWdlbnQgZG9lcyBub3QgZXhpc3QsIGJvb3RpbmcgbmV3IGFnZW50Li4uJylcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5ib290KClcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIEFnZW50IGJvb3RlZCBzdWNjZXNzZnVsbHkgKGFscmVhZHkgY29ubmVjdGVkKScpXG4gICAgICAgIH0gY2F0Y2ggKGJvb3RFcnJvcjogYW55KSB7XG4gICAgICAgICAgLy8gNDA5IG1lYW5zIGFnZW50IGFscmVhZHkgZXhpc3RzIC0gbmVlZCB0byBjb25uZWN0IGluc3RlYWRcbiAgICAgICAgICBpZiAoYm9vdEVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCc0MDknKSB8fCBib290RXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0NvbmZsaWN0JykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gQWdlbnQgYWxyZWFkeSBleGlzdHMgKDQwOSBDb25mbGljdCksIGNvbm5lY3RpbmcgaW5zdGVhZC4uLicpXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5jb25uZWN0KClcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBDb25uZWN0ZWQgdG8gZXhpc3RpbmcgYWdlbnQgYWZ0ZXIgYm9vdCBjb25mbGljdCcpXG4gICAgICAgICAgICB9IGNhdGNoIChjb25uZWN0QWZ0ZXJCb290RXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjb25uZWN0IGFmdGVyIGJvb3QgY29uZmxpY3Q6JywgY29ubmVjdEFmdGVyQm9vdEVycm9yKVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FnZW50IGV4aXN0cyBidXQgY2Fubm90IGNvbm5lY3QuIFBsZWFzZSByZXN0YXJ0IEtFUklBIHNlcnZpY2VzLicpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gYm9vdCBhZ2VudDonLCBib290RXJyb3IpXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGJvb3RFcnJvcj8ubWVzc2FnZSxcbiAgICAgICAgICAgICAgbmFtZTogYm9vdEVycm9yPy5uYW1lLFxuICAgICAgICAgICAgICBzdGFjazogYm9vdEVycm9yPy5zdGFjaz8uc3BsaXQoJ1xcbicpWzBdXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhyb3cgYm9vdEVycm9yXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgY29udHJvbGxlciBwcmVmaXggKEFJRCkgYWZ0ZXIgY29ubmVjdGlvblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlckFJRCA9IHRoaXMuY2xpZW50LmNvbnRyb2xsZXI/LnByZVxuICAgICAgICBjb25zb2xlLmxvZygn8J+UkSBDb250cm9sbGVyIEFJRDonLCBjb250cm9sbGVyQUlEKVxuICAgICAgICBcbiAgICAgICAgaWYgKGNvbnRyb2xsZXJBSUQpIHtcbiAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJQcmVmaXggPSBjb250cm9sbGVyQUlEXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gV2FybmluZzogQ29udHJvbGxlciBBSUQgaXMgdW5kZWZpbmVkIG9yIG51bGwnKVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgYWNjZXNzaW5nIGNvbnRyb2xsZXIgQUlEOicsIGVycm9yKVxuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID0gMFxuICAgICAgY29uc29sZS5sb2coJ+KchSB2TEVJIHNlcnZpY2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5JylcbiAgICAgIFxuICAgICAgLy8gQ1JJVElDQUw6IFdhaXQgYnJpZWZseSB0byBlbnN1cmUgY2xpZW50IHN0YXRlIGlzIGZ1bGx5IGluaXRpYWxpemVkXG4gICAgICBjb25zb2xlLmxvZygn4o+zIFdhaXRpbmcgZm9yIGNsaWVudCBzdGF0ZSB0byBzdGFiaWxpemUuLi4nKVxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpXG4gICAgICBjb25zb2xlLmxvZygn4pyFIENsaWVudCBzdGF0ZSByZWFkeScpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gaW5pdGlhbGl6ZSB2TEVJIHNlcnZpY2U6JywgZXJyb3IpXG4gICAgICB0aGlzLmNsaWVudCA9IG51bGxcbiAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IGZhbHNlXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZU9yZ2FuaXphdGlvbkFJRChvcmdJbmZvOiBPcmdhbml6YXRpb25JbmZvKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zb2xlLmxvZyhg8J+PoiBDcmVhdGluZyBvcmdhbml6YXRpb25hbCBBSUQgZm9yICR7b3JnSW5mby5uYW1lfS4uLmApXG4gICAgXG4gICAgLy8gQ1JJVElDQUw6IEVuc3VyZSBjbGllbnQgaXMgY29ubmVjdGVkIGJlZm9yZSBwcm9jZWVkaW5nXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVDbGllbnRDb25uZWN0ZWQoKVxuICAgIFxuICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xpZW50IGlzIG5vdCBpbml0aWFsaXplZCBhZnRlciBjb25uZWN0aW9uIGNoZWNrJylcbiAgICB9XG5cbiAgICAvLyBEb3VibGUtY2hlY2sgY2xpZW50IGhhcyByZXF1aXJlZCBwcm9wZXJ0aWVzXG4gICAgaWYgKCF0aGlzLmNsaWVudC5pZGVudGlmaWVycyB8fCB0eXBlb2YgdGhpcy5jbGllbnQuaWRlbnRpZmllcnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBDbGllbnQuaWRlbnRpZmllcnMgaXMgbm90IGF2YWlsYWJsZScpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsaWVudCBpZGVudGlmaWVycyBtZXRob2QgaXMgbm90IGF2YWlsYWJsZS4gQ2xpZW50IG1heSBub3QgYmUgcHJvcGVybHkgaW5pdGlhbGl6ZWQuJylcbiAgICB9XG5cbiAgICAvLyBDUklUSUNBTDogVmVyaWZ5IHN0YXRlIGlzIGF2YWlsYWJsZSBiZWZvcmUgcHJvY2VlZGluZ1xuICAgIGlmICghdGhpcy5jbGllbnQuc3RhdGUgfHwgdHlwZW9mIHRoaXMuY2xpZW50LnN0YXRlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQ2xpZW50LnN0YXRlIGlzIG5vdCBhdmFpbGFibGUnKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGllbnQgc3RhdGUgbWV0aG9kIGlzIG5vdCBhdmFpbGFibGUuIFBsZWFzZSByZWluaXRpYWxpemUgdGhlIHNlcnZpY2UuJylcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gVGVzdCBzdGF0ZSBhY2Nlc3MgYmVmb3JlIHByb2NlZWRpbmdcbiAgICAgIGNvbnN0IHN0YXRlVGVzdCA9IGF3YWl0IHRoaXMuY2xpZW50LnN0YXRlKClcbiAgICAgIGlmICghc3RhdGVUZXN0IHx8IHR5cGVvZiBzdGF0ZVRlc3QubmV3ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xpZW50IHN0YXRlIGlzIG5vdCBwcm9wZXJseSBpbml0aWFsaXplZC4gU3RhdGUubmV3KCkgbWV0aG9kIGlzIG1pc3NpbmcuJylcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgUHJlLWZsaWdodCBzdGF0ZSB2YWxpZGF0aW9uIHBhc3NlZCcpXG4gICAgICAvLyBDaGVjayBpZiBBSUQgYWxyZWFkeSBleGlzdHNcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQWlkID0gYXdhaXQgdGhpcy5jbGllbnQuaWRlbnRpZmllcnMoKS5nZXQob3JnSW5mby5uYW1lKVxuICAgICAgICBpZiAoZXhpc3RpbmdBaWQgJiYgZXhpc3RpbmdBaWQucHJlZml4KSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKEue+4jyBBSUQgYWxyZWFkeSBleGlzdHM6ICR7ZXhpc3RpbmdBaWQucHJlZml4fWApXG4gICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQWlkLnByZWZpeFxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBBSUQgZG9lc24ndCBleGlzdCwgY29udGludWUgdG8gY3JlYXRlIGl0XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIEFJRCBkb2VzIG5vdCBleGlzdCB5ZXQsIGNyZWF0aW5nIG5ldyBvbmUuLi5gKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgbmV3IEFJRFxuICAgICAgY29uc29sZS5sb2coJ/CflLUgQ2FsbGluZyBpZGVudGlmaWVycygpLmNyZWF0ZSgpIGZvcjonLCBvcmdJbmZvLm5hbWUpXG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBpZGVudGlmaWVycygpIHJldHVybnMgYSB2YWxpZCBvYmplY3RcbiAgICAgIGNvbnN0IGlkZW50aWZpZXJzQXBpID0gdGhpcy5jbGllbnQuaWRlbnRpZmllcnMoKVxuICAgICAgaWYgKCFpZGVudGlmaWVyc0FwaSB8fCAhaWRlbnRpZmllcnNBcGkuY3JlYXRlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBpZGVudGlmaWVycygpIHJldHVybmVkIG51bGwgb3IgaGFzIG5vIGNyZWF0ZSBtZXRob2QnKVxuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgQ2xpZW50IHN0YXRlOicsIHtcbiAgICAgICAgICBoYXNDbGllbnQ6ICEhdGhpcy5jbGllbnQsXG4gICAgICAgICAgaGFzQ29udHJvbGxlcjogISF0aGlzLmNsaWVudC5jb250cm9sbGVyLFxuICAgICAgICAgIGNvbnRyb2xsZXJQcmU6IHRoaXMuY2xpZW50LmNvbnRyb2xsZXI/LnByZSxcbiAgICAgICAgICBoYXNJZGVudGlmaWVyczogISF0aGlzLmNsaWVudC5pZGVudGlmaWVycyxcbiAgICAgICAgICBpZGVudGlmaWVyc1R5cGU6IHR5cGVvZiB0aGlzLmNsaWVudC5pZGVudGlmaWVyc1xuICAgICAgICB9KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2lkZW50aWZpZXJzKCkgbWV0aG9kIG5vdCBwcm9wZXJseSBpbml0aWFsaXplZC4gQ2xpZW50IG1heSBuZWVkIHJlY29ubmVjdGlvbi4nKVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBhaWRSZXN1bHQgPSBhd2FpdCBpZGVudGlmaWVyc0FwaS5jcmVhdGUob3JnSW5mby5uYW1lKVxuICAgICAgXG4gICAgICBpZiAoIWFpZFJlc3VsdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgaWRlbnRpZmllciAtIGFpZFJlc3VsdCBpcyBudWxsJylcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSBvcGVyYXRpb24gbmFtZSBpZiBhdmFpbGFibGVcbiAgICAgIGxldCBvcE5hbWUgPSBudWxsXG4gICAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGFpZFJlc3VsdC5vcCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNvbnN0IG9wUmVzdWx0ID0gYWlkUmVzdWx0Lm9wKClcbiAgICAgICAgICBvcE5hbWUgPSBvcFJlc3VsdD8ubmFtZSB8fCBudWxsXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKG9wRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRXJyb3IgY2FsbGluZyBvcCgpOicsIG9wRXJyb3IpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICghb3BOYW1lKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIE5vIG9wZXJhdGlvbiBuYW1lLCB3YWl0aW5nIGJyaWVmbHkgdGhlbiBjaGVja2luZyBBSUQuLi4nKVxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgYWlkID0gKGF3YWl0IHRoaXMuY2xpZW50LmlkZW50aWZpZXJzKCkuZ2V0KG9yZ0luZm8ubmFtZSkpLnByZWZpeFxuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgT3JnYW5pemF0aW9uYWwgQUlEIGNyZWF0ZWQ6ICR7YWlkfWApXG4gICAgICAgICAgcmV0dXJuIGFpZFxuICAgICAgICB9IGNhdGNoIChnZXRFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gdmVyaWZ5IEFJRCBjcmVhdGlvbjonLCBnZXRFcnJvcilcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FJRCBjcmVhdGlvbiBzdGF0dXMgdW5jZXJ0YWluIC0gb3BlcmF0aW9uIG5vdCB0cmFja2VkJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBXYWl0IGZvciB0aGUgb3BlcmF0aW9uIHRvIGNvbXBsZXRlXG4gICAgICBjb25zb2xlLmxvZyhg4o+zIFdhaXRpbmcgZm9yIG9wZXJhdGlvbjogJHtvcE5hbWV9YClcbiAgICAgIGF3YWl0IHRoaXMuY2xpZW50Lm9wZXJhdGlvbnMoKS53YWl0KG9wTmFtZSlcbiAgICAgIFxuICAgICAgY29uc3QgYWlkID0gKGF3YWl0IHRoaXMuY2xpZW50LmlkZW50aWZpZXJzKCkuZ2V0KG9yZ0luZm8ubmFtZSkpLnByZWZpeFxuICAgICAgY29uc29sZS5sb2coYOKchSBPcmdhbml6YXRpb25hbCBBSUQgY3JlYXRlZDogJHthaWR9YClcbiAgICAgIFxuICAgICAgcmV0dXJuIGFpZFxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gY3JlYXRlIG9yZ2FuaXphdGlvbmFsIEFJRDonLCBlcnJvcilcbiAgICAgIFxuICAgICAgLy8gRW5oYW5jZWQgZXJyb3IgbWVzc2FnZSB3aXRoIHJldHJ5IHN1Z2dlc3Rpb25cbiAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0Nhbm5vdCByZWFkIHByb3BlcnRpZXMgb2YgbnVsbCcpIHx8IFxuICAgICAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdzdGF0ZScpIHx8XG4gICAgICAgICAgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ1N0YXRlLm5ldygpJykpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ0NsaWVudCBzdGF0ZSBlcnJvciBkdXJpbmcgQUlEIGNyZWF0aW9uLiBUaGUgS0VSSUEgYWdlbnQgY29ubmVjdGlvbiBtYXkgYmUgdW5zdGFibGUuIFRyeTogMSkgUmVzdGFydCBLRVJJQSBzZXJ2aWNlcywgMikgUmVmcmVzaCB0aGUgcGFnZSwgMykgQ2xpY2sgXCJJc3N1ZSBDcmVkZW50aWFsc1wiIGFnYWluLidcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVQZXJzb25BSUQocGVyc29uSW5mbzogUGVyc29uSW5mbyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVDbGllbnRDb25uZWN0ZWQoKVxuICAgIFxuICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xpZW50IG5vdCBpbml0aWFsaXplZCcpXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5GkIENyZWF0aW5nIHBlcnNvbmFsIEFJRCBmb3IgJHtwZXJzb25JbmZvLm5hbWV9Li4uYClcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgQUlEIGFscmVhZHkgZXhpc3RzXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBleGlzdGluZ0FpZCA9IGF3YWl0IHRoaXMuY2xpZW50LmlkZW50aWZpZXJzKCkuZ2V0KHBlcnNvbkluZm8ubmFtZSlcbiAgICAgICAgaWYgKGV4aXN0aW5nQWlkICYmIGV4aXN0aW5nQWlkLnByZWZpeCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDihLnvuI8gQUlEIGFscmVhZHkgZXhpc3RzOiAke2V4aXN0aW5nQWlkLnByZWZpeH1gKVxuICAgICAgICAgIHJldHVybiBleGlzdGluZ0FpZC5wcmVmaXhcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coYPCfk50gQUlEIGRvZXMgbm90IGV4aXN0IHlldCwgY3JlYXRpbmcgbmV3IG9uZS4uLmApXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGFpZFJlc3VsdCA9IGF3YWl0IHRoaXMuY2xpZW50LmlkZW50aWZpZXJzKCkuY3JlYXRlKHBlcnNvbkluZm8ubmFtZSlcbiAgICAgIFxuICAgICAgaWYgKCFhaWRSZXN1bHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGlkZW50aWZpZXIgLSBhaWRSZXN1bHQgaXMgbnVsbCcpXG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgb3BlcmF0aW9uIG5hbWUgaWYgYXZhaWxhYmxlXG4gICAgICBsZXQgb3BOYW1lID0gbnVsbFxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBhaWRSZXN1bHQub3AgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjb25zdCBvcFJlc3VsdCA9IGFpZFJlc3VsdC5vcCgpXG4gICAgICAgICAgb3BOYW1lID0gb3BSZXN1bHQ/Lm5hbWUgfHwgbnVsbFxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChvcEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIEVycm9yIGNhbGxpbmcgb3AoKTonLCBvcEVycm9yKVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoIW9wTmFtZSkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBObyBvcGVyYXRpb24gbmFtZSwgd2FpdGluZyBicmllZmx5IHRoZW4gY2hlY2tpbmcgQUlELi4uJylcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGFpZCA9IChhd2FpdCB0aGlzLmNsaWVudC5pZGVudGlmaWVycygpLmdldChwZXJzb25JbmZvLm5hbWUpKS5wcmVmaXhcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFBlcnNvbmFsIEFJRCBjcmVhdGVkOiAke2FpZH1gKVxuICAgICAgICAgIHJldHVybiBhaWRcbiAgICAgICAgfSBjYXRjaCAoZ2V0RXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIHZlcmlmeSBBSUQgY3JlYXRpb246JywgZ2V0RXJyb3IpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSUQgY3JlYXRpb24gc3RhdHVzIHVuY2VydGFpbiAtIG9wZXJhdGlvbiBub3QgdHJhY2tlZCcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYOKPsyBXYWl0aW5nIGZvciBvcGVyYXRpb246ICR7b3BOYW1lfWApXG4gICAgICBhd2FpdCB0aGlzLmNsaWVudC5vcGVyYXRpb25zKCkud2FpdChvcE5hbWUpXG4gICAgICBcbiAgICAgIGNvbnN0IGFpZCA9IChhd2FpdCB0aGlzLmNsaWVudC5pZGVudGlmaWVycygpLmdldChwZXJzb25JbmZvLm5hbWUpKS5wcmVmaXhcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgUGVyc29uYWwgQUlEIGNyZWF0ZWQ6ICR7YWlkfWApXG4gICAgICBcbiAgICAgIHJldHVybiBhaWRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjcmVhdGUgcGVyc29uYWwgQUlEOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBpc3N1ZU9PUkNyZWRlbnRpYWwoXG4gICAgb3JnQWlkOiBzdHJpbmcsXG4gICAgcGVyc29uQWlkOiBzdHJpbmcsXG4gICAgcGVyc29uSW5mbzogUGVyc29uSW5mb1xuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlQ2xpZW50Q29ubmVjdGVkKClcbiAgICBcbiAgICBpZiAoIXRoaXMuY2xpZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsaWVudCBub3QgaW5pdGlhbGl6ZWQnKVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+TnCBJc3N1aW5nIE9PUiBjcmVkZW50aWFsIGZvciAke3BlcnNvbkluZm8ubmFtZX0uLi5gKVxuICAgICAgXG4gICAgICBjb25zdCBvb3JTY2hlbWEgPSAnRUg2ZWtMalNyOFYzMld5RmJHZTF6WGpUekZzOVBrVFltdXBKOUg2NU8xNGcnXG4gICAgICBcbiAgICAgIGNvbnN0IGNyZWRlbnRpYWxEYXRhID0ge1xuICAgICAgICBMRUk6IHBlcnNvbkluZm8ub3JnYW5pemF0aW9uTEVJLFxuICAgICAgICBwZXJzb25MZWdhbE5hbWU6IHBlcnNvbkluZm8ubGVnYWxOYW1lLFxuICAgICAgICBvZmZpY2lhbFJvbGU6IHBlcnNvbkluZm8ucm9sZSxcbiAgICAgIH1cblxuICAgICAgY29uc3QgY3JlZGVudGlhbCA9IGF3YWl0IHRoaXMuY2xpZW50LmNyZWRlbnRpYWxzKCkuaXNzdWUoXG4gICAgICAgIG9yZ0FpZCxcbiAgICAgICAgcGVyc29uQWlkLFxuICAgICAgICBvb3JTY2hlbWEsXG4gICAgICAgIGNyZWRlbnRpYWxEYXRhXG4gICAgICApXG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUgT09SIGNyZWRlbnRpYWwgaXNzdWVkOiAke2NyZWRlbnRpYWwuc2FkLmR9YClcbiAgICAgIHJldHVybiBjcmVkZW50aWFsXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gaXNzdWUgT09SIGNyZWRlbnRpYWw6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGlzc3VlRUNSQ3JlZGVudGlhbChcbiAgICBvcmdBaWQ6IHN0cmluZyxcbiAgICBwZXJzb25BaWQ6IHN0cmluZyxcbiAgICBwZXJzb25JbmZvOiBQZXJzb25JbmZvLFxuICAgIG9vckNyZWRlbnRpYWxTQUlEOiBzdHJpbmcsXG4gICAgc3BlbmRpbmdMaW1pdD86IG51bWJlcixcbiAgICBtYXhDb250cmFjdFZhbHVlPzogbnVtYmVyXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVDbGllbnRDb25uZWN0ZWQoKVxuICAgIFxuICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xpZW50IG5vdCBpbml0aWFsaXplZCcpXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OcIElzc3VpbmcgRUNSIGNyZWRlbnRpYWwgZm9yICR7cGVyc29uSW5mby5uYW1lfS4uLmApXG4gICAgICBcbiAgICAgIGNvbnN0IGVjclNjaGVtYSA9ICdFS0E1N2JLQkt4cl9rTjdpTl96WmVCRzhhUDBTdi1KdnBQTGRKMWpnM2IyZydcbiAgICAgIFxuICAgICAgY29uc3QgY3JlZGVudGlhbERhdGEgPSB7XG4gICAgICAgIExFSTogcGVyc29uSW5mby5vcmdhbml6YXRpb25MRUksXG4gICAgICAgIHBlcnNvbkxlZ2FsTmFtZTogcGVyc29uSW5mby5sZWdhbE5hbWUsXG4gICAgICAgIGVuZ2FnZW1lbnRDb250ZXh0Um9sZTogcGVyc29uSW5mby5yb2xlLFxuICAgICAgICAuLi4oc3BlbmRpbmdMaW1pdCAmJiB7IHNwZW5kaW5nTGltaXQgfSksXG4gICAgICAgIC4uLihtYXhDb250cmFjdFZhbHVlICYmIHsgbWF4Q29udHJhY3RWYWx1ZSB9KSxcbiAgICAgIH1cblxuICAgICAgY29uc3QgZWRnZXMgPSB7XG4gICAgICAgIGF1dGg6IG9vckNyZWRlbnRpYWxTQUlELFxuICAgICAgfVxuXG4gICAgICBjb25zdCBjcmVkZW50aWFsID0gYXdhaXQgdGhpcy5jbGllbnQuY3JlZGVudGlhbHMoKS5pc3N1ZShcbiAgICAgICAgb3JnQWlkLFxuICAgICAgICBwZXJzb25BaWQsXG4gICAgICAgIGVjclNjaGVtYSxcbiAgICAgICAgY3JlZGVudGlhbERhdGEsXG4gICAgICAgIGVkZ2VzXG4gICAgICApXG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUgRUNSIGNyZWRlbnRpYWwgaXNzdWVkOiAke2NyZWRlbnRpYWwuc2FkLmR9YClcbiAgICAgIHJldHVybiBjcmVkZW50aWFsXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gaXNzdWUgRUNSIGNyZWRlbnRpYWw6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHZlcmlmeUNyZWRlbnRpYWxDaGFpbihcbiAgICBlY3JDcmVkZW50aWFsOiBhbnksXG4gICAgb29yQ3JlZGVudGlhbDogYW55LFxuICAgIHF2aUNyZWRlbnRpYWw6IGFueVxuICApOiBQcm9taXNlPHtcbiAgICB2YWxpZDogYm9vbGVhblxuICAgIG9yZ0xFSTogc3RyaW5nXG4gICAgcGVyc29uTmFtZTogc3RyaW5nXG4gICAgcm9sZTogc3RyaW5nXG4gICAgc3BlbmRpbmdMaW1pdD86IG51bWJlclxuICAgIG1heENvbnRyYWN0VmFsdWU/OiBudW1iZXJcbiAgICBkZXRhaWxzOiBhbnlcbiAgfT4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlQ2xpZW50Q29ubmVjdGVkKClcbiAgICBcbiAgICBpZiAoIXRoaXMuY2xpZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsaWVudCBub3QgaW5pdGlhbGl6ZWQnKVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBWZXJpZnlpbmcgY3JlZGVudGlhbCBjaGFpbi4uLicpXG5cbiAgICAgIGNvbnN0IGVjclZhbGlkID0gYXdhaXQgdGhpcy5jbGllbnQuY3JlZGVudGlhbHMoKS52ZXJpZnkoZWNyQ3JlZGVudGlhbClcbiAgICAgIGlmICghZWNyVmFsaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFQ1IgY3JlZGVudGlhbCBzaWduYXR1cmUgaW52YWxpZCcpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpbmtlZE9PUlNBSUQgPSBlY3JDcmVkZW50aWFsLnNhZC5lPy5hdXRoXG4gICAgICBpZiAobGlua2VkT09SU0FJRCAhPT0gb29yQ3JlZGVudGlhbC5zYWQuZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VDUiBkb2VzIG5vdCBsaW5rIHRvIHByb3ZpZGVkIE9PUiBjcmVkZW50aWFsJylcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb29yVmFsaWQgPSBhd2FpdCB0aGlzLmNsaWVudC5jcmVkZW50aWFscygpLnZlcmlmeShvb3JDcmVkZW50aWFsKVxuICAgICAgaWYgKCFvb3JWYWxpZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09PUiBjcmVkZW50aWFsIHNpZ25hdHVyZSBpbnZhbGlkJylcbiAgICAgIH1cblxuICAgICAgaWYgKG9vckNyZWRlbnRpYWwuc2FkLmkgIT09IHF2aUNyZWRlbnRpYWwuc2FkLmEuaSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09PUiBpc3N1ZXIgZG9lcyBub3QgbWF0Y2ggUVZJLXZlcmlmaWVkIG9yZ2FuaXphdGlvbicpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHF2aVZhbGlkID0gYXdhaXQgdGhpcy5jbGllbnQuY3JlZGVudGlhbHMoKS52ZXJpZnkocXZpQ3JlZGVudGlhbClcbiAgICAgIGlmICghcXZpVmFsaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRVkkgY3JlZGVudGlhbCBzaWduYXR1cmUgaW52YWxpZCcpXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRnVsbCBjcmVkZW50aWFsIGNoYWluIHZlcmlmaWVkIScpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgICBvcmdMRUk6IHF2aUNyZWRlbnRpYWwuc2FkLmEuTEVJLFxuICAgICAgICBwZXJzb25OYW1lOiBlY3JDcmVkZW50aWFsLnNhZC5hLnBlcnNvbkxlZ2FsTmFtZSxcbiAgICAgICAgcm9sZTogZWNyQ3JlZGVudGlhbC5zYWQuYS5lbmdhZ2VtZW50Q29udGV4dFJvbGUsXG4gICAgICAgIHNwZW5kaW5nTGltaXQ6IGVjckNyZWRlbnRpYWwuc2FkLmEuc3BlbmRpbmdMaW1pdCxcbiAgICAgICAgbWF4Q29udHJhY3RWYWx1ZTogZWNyQ3JlZGVudGlhbC5zYWQuYS5tYXhDb250cmFjdFZhbHVlLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgb3JnTmFtZTogcXZpQ3JlZGVudGlhbC5zYWQuYS5sZWdhbE5hbWUsXG4gICAgICAgICAgbGVpOiBxdmlDcmVkZW50aWFsLnNhZC5hLkxFSSxcbiAgICAgICAgICBwZXJzb25OYW1lOiBlY3JDcmVkZW50aWFsLnNhZC5hLnBlcnNvbkxlZ2FsTmFtZSxcbiAgICAgICAgICByb2xlOiBlY3JDcmVkZW50aWFsLnNhZC5hLmVuZ2FnZW1lbnRDb250ZXh0Um9sZSxcbiAgICAgICAgICBzcGVuZGluZ0xpbWl0OiBlY3JDcmVkZW50aWFsLnNhZC5hLnNwZW5kaW5nTGltaXQsXG4gICAgICAgICAgbWF4Q29udHJhY3RWYWx1ZTogZWNyQ3JlZGVudGlhbC5zYWQuYS5tYXhDb250cmFjdFZhbHVlLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBDcmVkZW50aWFsIGNoYWluIHZlcmlmaWNhdGlvbiBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIG9yZ0xFSTogJycsXG4gICAgICAgIHBlcnNvbk5hbWU6ICcnLFxuICAgICAgICByb2xlOiAnJyxcbiAgICAgICAgZGV0YWlsczogeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0Q3JlZGVudGlhbHMoYWlkOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVDbGllbnRDb25uZWN0ZWQoKVxuICAgIFxuICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xpZW50IG5vdCBpbml0aWFsaXplZCcpXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXdhaXQgdGhpcy5jbGllbnQuY3JlZGVudGlhbHMoKS5saXN0KGFpZClcbiAgICAgIHJldHVybiBjcmVkZW50aWFsc1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGdldCBjcmVkZW50aWFsczonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmV2b2tlQ3JlZGVudGlhbChjcmVkZW50aWFsU0FJRDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVDbGllbnRDb25uZWN0ZWQoKVxuICAgIFxuICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xpZW50IG5vdCBpbml0aWFsaXplZCcpXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIFJldm9raW5nIGNyZWRlbnRpYWw6ICR7Y3JlZGVudGlhbFNBSUR9YClcbiAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmNyZWRlbnRpYWxzKCkucmV2b2tlKGNyZWRlbnRpYWxTQUlEKVxuICAgICAgY29uc29sZS5sb2coJ+KchSBDcmVkZW50aWFsIHJldm9rZWQgc3VjY2Vzc2Z1bGx5JylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byByZXZva2UgY3JlZGVudGlhbDonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgZ2V0Q29udHJvbGxlckFJRCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyUHJlZml4XG4gIH1cblxuICBpc1NlcnZpY2VJbml0aWFsaXplZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc0luaXRpYWxpemVkICYmICEhdGhpcy5jbGllbnRcbiAgfVxuXG4gIGFzeW5jIGNsZWFudXAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc29sZS5sb2coJ/Cfp7kgQ2xlYW5pbmcgdXAgdkxFSSBzZXJ2aWNlLi4uJylcbiAgICB0aGlzLmNsaWVudCA9IG51bGxcbiAgICB0aGlzLmNvbnRyb2xsZXJQcmVmaXggPSBudWxsXG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2VcbiAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID0gMFxuICB9XG59XG5cbi8vIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIHZMRUkgc2VydmljZSBpbnN0YW5jZXNcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWTEVJU2VydmljZShjb25maWc6IFZMRUlDb25maWcpOiBWTEVJU2VydmljZSB7XG4gIHJldHVybiBuZXcgVkxFSVNlcnZpY2UoY29uZmlnKVxufVxuXG4vLyBVdGlsaXR5IGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHJhbmRvbSBicmFuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVCcmFuKCk6IHN0cmluZyB7XG4gIHJldHVybiByYW5kb21QYXNzY29kZSgpXG59XG4iXSwibmFtZXMiOlsiU2lnbmlmeUNsaWVudCIsInJhbmRvbVBhc3Njb2RlIiwicmVhZHkiLCJWTEVJU2VydmljZSIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiY2xpZW50IiwiaXNJbml0aWFsaXplZCIsImNvbnRyb2xsZXJQcmVmaXgiLCJyZWNvbm5lY3RBdHRlbXB0cyIsIm1heFJlY29ubmVjdEF0dGVtcHRzIiwia2VyaWFVcmwiLCJicmFuIiwidGllciIsImJvb3RVcmwiLCJlbnN1cmVDbGllbnRDb25uZWN0ZWQiLCJjb25zb2xlIiwibG9nIiwiaW5pdGlhbGl6ZSIsImNvbnRyb2xsZXIiLCJwcmUiLCJzdGF0ZSIsIndhcm4iLCJzdGF0ZVJlc3VsdCIsIm5ldyIsImVyciIsIm1lc3NhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJFcnJvciIsImNvbm5lY3QiLCJjb25uZWN0RXJyb3IiLCJib290IiwiYm9vdEVycm9yIiwiaW5jbHVkZXMiLCJjb25uZWN0QWZ0ZXJCb290RXJyb3IiLCJlcnJvciIsIm5hbWUiLCJzdGFjayIsInNwbGl0IiwiY29udHJvbGxlckFJRCIsImNyZWF0ZU9yZ2FuaXphdGlvbkFJRCIsIm9yZ0luZm8iLCJpZGVudGlmaWVycyIsInN0YXRlVGVzdCIsImV4aXN0aW5nQWlkIiwiZ2V0IiwicHJlZml4IiwiaWRlbnRpZmllcnNBcGkiLCJjcmVhdGUiLCJoYXNDbGllbnQiLCJoYXNDb250cm9sbGVyIiwiY29udHJvbGxlclByZSIsImhhc0lkZW50aWZpZXJzIiwiaWRlbnRpZmllcnNUeXBlIiwiYWlkUmVzdWx0Iiwib3BOYW1lIiwib3AiLCJvcFJlc3VsdCIsIm9wRXJyb3IiLCJhaWQiLCJnZXRFcnJvciIsIm9wZXJhdGlvbnMiLCJ3YWl0IiwiZXJyb3JNZXNzYWdlIiwiY3JlYXRlUGVyc29uQUlEIiwicGVyc29uSW5mbyIsImlzc3VlT09SQ3JlZGVudGlhbCIsIm9yZ0FpZCIsInBlcnNvbkFpZCIsIm9vclNjaGVtYSIsImNyZWRlbnRpYWxEYXRhIiwiTEVJIiwib3JnYW5pemF0aW9uTEVJIiwicGVyc29uTGVnYWxOYW1lIiwibGVnYWxOYW1lIiwib2ZmaWNpYWxSb2xlIiwicm9sZSIsImNyZWRlbnRpYWwiLCJjcmVkZW50aWFscyIsImlzc3VlIiwic2FkIiwiZCIsImlzc3VlRUNSQ3JlZGVudGlhbCIsIm9vckNyZWRlbnRpYWxTQUlEIiwic3BlbmRpbmdMaW1pdCIsIm1heENvbnRyYWN0VmFsdWUiLCJlY3JTY2hlbWEiLCJlbmdhZ2VtZW50Q29udGV4dFJvbGUiLCJlZGdlcyIsImF1dGgiLCJ2ZXJpZnlDcmVkZW50aWFsQ2hhaW4iLCJlY3JDcmVkZW50aWFsIiwib29yQ3JlZGVudGlhbCIsInF2aUNyZWRlbnRpYWwiLCJlY3JWYWxpZCIsInZlcmlmeSIsImxpbmtlZE9PUlNBSUQiLCJlIiwib29yVmFsaWQiLCJpIiwiYSIsInF2aVZhbGlkIiwidmFsaWQiLCJvcmdMRUkiLCJwZXJzb25OYW1lIiwiZGV0YWlscyIsIm9yZ05hbWUiLCJsZWkiLCJnZXRDcmVkZW50aWFscyIsImxpc3QiLCJyZXZva2VDcmVkZW50aWFsIiwiY3JlZGVudGlhbFNBSUQiLCJyZXZva2UiLCJnZXRDb250cm9sbGVyQUlEIiwiaXNTZXJ2aWNlSW5pdGlhbGl6ZWQiLCJjbGVhbnVwIiwiY3JlYXRlVkxFSVNlcnZpY2UiLCJnZW5lcmF0ZUJyYW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./lib/vlei-service.ts\n");

/***/ })

};
;